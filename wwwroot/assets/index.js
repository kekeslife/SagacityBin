const __vite__fileDeps=["assets/ant-design-vue.js","assets/vendor.js","assets/ant-design-vue.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{bA as Y,e as Z,i as E,E as N,z as ee,x as te,a5 as oe,k as ne,u as se,bB as re,B as ae,r as d,o as le,w as f,ar as ie,h as c,l as T,v as j,g as P,t as B,m as $,D as x,bp as ce}from"./vendor.js";import{_ as k,r as ue}from"./routerConfig.js";import{u as de,$ as z,_ as pe,p as _e}from"./Index2.js";import{M as fe,a as me}from"./ant-design-vue.js";import{_ as ge}from"./Login.js";(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const p of o.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&s(p)}).observe(document,{childList:!0,subtree:!0});function i(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(t){if(t.ep)return;t.ep=!0;const o=i(t);fetch(t.href,o)}})();const ve=(u,l,i)=>{const s=u[l];return s?typeof s=="function"?s():Promise.resolve(s):new Promise((t,o)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(o.bind(null,new Error("Unknown variable dynamic import: "+l+(l.split("/").length!==i?". Note that variables only represent file names one level deep.":""))))})},he=u=>{fe.error({title:Y(u)?u:u.message})},ye=(u,l="id",i="parentId",s="children")=>{const t=Array.from(u),o="|【keke】|",p=t.reduce((a,_,v)=>(a[`${_[i]}${o}${_[l]}`]=v,a),{});let h=Object.keys(p),b=h.length;for(const a of t){if(!a[i])continue;const _=`${o}${a[i]}`;h.some(v=>v.endsWith(_))||(h.push(`null${_}`),p[`null${_}`]=b,t.push({[l]:a[i],[i]:null}),b+=1)}const g=Array.from(t);h=Object.keys(p);for(let a=g.length-1;a>=0;a--){let _=t[a],v=t[p[h.find(D=>D.endsWith(`${o}${_[i]}`))]];v&&(v[s]=[_,...v[s]||[]],g.splice(a,1))}let w;return g.length===1?w=g[0]:w={[l]:null,[i]:null,[s]:g},w};var y=(u=>(u.chinese="cn",u.english="en",u))(y||{});const be={class:"layout-sider-menu-title"},Ee={style:{"font-size":"2rem","writing-mode":"vertical-rl"}},we=Z({__name:"App",setup(u){const l=se(),i=re(),s=de(),t=E(!1),o=E(!1),p=N([]),h=E([]);let b=[];const g=E(),w=ee(()=>{var e,n;return a.value===y.english?(e=g.value)==null?void 0:e.programDescEn:(n=g.value)==null?void 0:n.programDesc}),a=E(""),_=E(),v=E(),D=e=>{a.value=e.toString(),s.setLang(e.toString())};ae("lang",{lang:a}),te(a,async(e,n)=>{var m;console.log("changeLang",e),_.value=(await ve(Object.assign({"./langs/app/cn.ts":()=>k(()=>import("./cn.js"),[]),"./langs/app/en.ts":()=>k(()=>import("./en.js"),[])}),`./langs/app/${e}.ts`,4)).langObj,v.value=e===y.english?(await k(()=>import("./ant-design-vue.js").then(r=>r.e),__vite__mapDeps([0,1,2]))).default:(await k(()=>import("./ant-design-vue.js").then(r=>r.z),__vite__mapDeps([0,1,2]))).default,ie.locale(e===y.english?"en":"zh-cn"),(m=h.value)==null||m.forEach(r=>{A(e,r)})});const A=(e,n)=>{n.label=e===y.chinese?n.desc:n.descEn,n.children&&n.children.forEach(m=>{A(e,m)})},K=e=>{o.value=e,s.setMenuCollapsed(e)},V=e=>{p.value=[e.key],l.push({name:e.key.toString()});const n=b.find(m=>m.programNo===e.key);g.value=n},q=async()=>{const n=(await z.post("/api/user/programs",{userId:s.userId})).data;n.isSuccess?b=n.records:he(n.message)},M=e=>{const n=s.roles;return e==="index"?!0:!n||!n.includes(e)?(l.push("/"),!1):!0},W=async()=>{var m;if(a.value=s.lang,!s.isLogged||(await s.refreshToken(),!M(((m=i.name)==null?void 0:m.toString())??"a")))return;await q(),g.value=b.find(r=>r.programNo===i.name);const e=b.map(r=>({key:r.programNo,label:a.value===y.english?r.programDescEn:r.programDesc,desc:r.programDesc,descEn:r.programDescEn,progId:r.programId,parentId:r.parentId}));let n=ye(e,"id","parentId","children");n=n.children.filter(r=>r.children),h.value=n,p.value=[i.name],o.value=s.menuCollapsed,l.beforeEach(async(r,R,S)=>{var O;M(((O=r.name)==null?void 0:O.toString())??"a")&&S()}),t.value=!0};return oe(()=>{console.log("onBeforeMount"),W()}),(e,n)=>{const m=d("a-menu"),r=d("a-divider"),R=d("a-button"),S=d("a-select-option"),O=d("a-select"),F=d("a-flex"),H=d("a-layout-sider"),U=d("router-view"),G=d("a-layout-content"),C=d("a-layout"),J=d("a-spin"),Q=d("a-modal"),X=d("a-config-provider");return le(),ne(X,{locale:v.value},{default:f(()=>[c(J,{spinning:!t.value},{default:f(()=>[c(C,{style:{"min-height":"100vh"}},{default:f(()=>[c(H,{collapsed:o.value,collapsible:"",onCollapse:K},{default:f(()=>[T(P("div",be,[P("div",Ee,B(w.value),1)],512),[[j,o.value]]),T(P("div",null,[c(m,{theme:"dark",mode:"inline",onSelect:V,selectedKeys:p.value,items:h.value},null,8,["selectedKeys","items"]),c(r,{style:{"background-color":"#ffffff44"}}),c(F,{justify:"space-around",align:"center"},{default:f(()=>[c(R,{ghost:"",size:"small"},{default:f(()=>{var I;return[$(B((I=_.value)==null?void 0:I.登出),1)]}),_:1}),c(O,{value:a.value,onChange:D,size:"small",style:{width:"100px"}},{default:f(()=>[c(S,{value:x(y).english},{default:f(()=>[$("English")]),_:1},8,["value"]),c(S,{value:x(y).chinese},{default:f(()=>[$("中文")]),_:1},8,["value"])]),_:1},8,["value"])]),_:1})],512),[[j,!o.value]])]),_:1},8,["collapsed"]),c(C,null,{default:f(()=>[c(G,{style:{margin:"0 16px"}},{default:f(()=>[c(U)]),_:1})]),_:1})]),_:1})]),_:1},8,["spinning"]),c(Q,{closable:!1,open:!x(s).isLogged,title:"登录",footer:null},{default:f(()=>[c(ge)]),_:1},8,["open"])]),_:1},8,["locale"])}}}),Le=pe(we,[["__scopeId","data-v-e7d5cead"]]),L=ce(Le);L.use(me);L.use(ue);L.use(_e);L.config.globalProperties.$axios=z;L.mount("#app");
