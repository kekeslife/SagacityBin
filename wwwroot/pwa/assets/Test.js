import{E as d}from"./lang.js";import{S as b}from"./Scan.js";import{K as y}from"./KVUpload.js";import{$ as L}from"./axiosExt.js";import{d as $,A as u,B as j,h as F,k as f,e as n,b as a,F as K,i as p,r as C,o as T,z as l,y as z,j as G}from"./vendor.js";import"./pinia.js";import"./storage.js";import"./json-data.js";const W=$({__name:"Test",setup(I){const{showAlert:g,showError:v,showConfirm:_}=p("alert"),{lang:m,changeLang:V}=p("lang"),r=u(new Date(2024,1,1)),i=u(!1),c=u([]),k=()=>{i.value=!0},w=s=>{console.log(s)},h=()=>{g("text","title")},S=()=>{v("text","title")},x=async()=>{console.log("s onConfirm"),await new Promise((e,o)=>{_("text",e)})&&console.log("e onConfirm")},E=()=>{V(m.value.lang===d.chinese?d.english:d.chinese)},N=()=>{console.log(r.value)},A=()=>{r.value=new Date(2024,1,2)},B=(s,e)=>{s.fileName=e.record},D=async()=>{const e=(await L.get("/api/test/imgs/sn001")).data;e.isSuccess&&(c.value=e.records.map(o=>({fileName:o,src:`/files/sn001/${o}`,state:"success"})))};return j(()=>{D()}),(s,e)=>{const o=C("v-btn"),U=C("kv-date");return T(),F(K,null,[f("div",null,[n(o,{onClick:h},{default:a(()=>[l("showAlert")]),_:1}),n(o,{onClick:S},{default:a(()=>[l("showError")]),_:1}),n(o,{onClick:x},{default:a(()=>[l("showConfirm")]),_:1}),n(o,{onClick:E},{default:a(()=>{var t;return[l(z((t=G(m))==null?void 0:t.lang),1)]}),_:1}),n(o,{onClick:N},{default:a(()=>[l("get date")]),_:1}),n(o,{onClick:A},{default:a(()=>[l("set date")]),_:1}),n(o,{onClick:k},{default:a(()=>[l("start scan")]),_:1})]),f("div",null,[n(U,{modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=t=>r.value=t),label:"日期"},null,8,["modelValue"])]),n(b,{options:{formats:["EAN-13","QRCode","Code128","Code39"]},modelValue:i.value,"onUpdate:modelValue":e[1]||(e[1]=t=>i.value=t),onChange:w},null,8,["modelValue"]),n(y,{"up-url":"/api/test/upload","del-url":"/api/test/delFile","del-data":t=>`sn001/${t.fileName}`,"up-data":t=>({sn:"sn001"}),onUpload:B,modelValue:c.value,"onUpdate:modelValue":e[2]||(e[2]=t=>c.value=t)},null,8,["del-data","modelValue"])],64)}}});export{W as default};
