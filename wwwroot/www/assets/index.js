const __vite__fileDeps=["assets/cn.js","assets/lang.js","assets/en.js","assets/ant-design-vue.js","assets/vendor.js","assets/ant-design-vue.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{d as oe,r as m,E as te,B as ne,n as ae,c as re,w as i,g as se,cT as le,D as z,ar as ie,j as c,o as ce,f as l,k as S,e as k,t as B,v as T,l as x,u as b,bn as ue}from"./vendor.js";import{_ as L,r as de}from"./router-config.js";import{u as pe}from"./storage.js";import{$}from"./axiosExt.js";import{d as fe}from"./util.js";import{s as me}from"./KaUpload.js";import{_ as _e}from"./Login.js";import{E as _}from"./lang.js";import{_ as ge}from"./Home.js";import{c as ve}from"./ant-design-vue.js";import{p as he}from"./pinia.js";import{K as ye}from"./ka-table.js";import"./json-data.js";(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function p(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(t){if(t.ep)return;t.ep=!0;const s=p(t);fetch(t.href,s)}})();const we=(D,u,p)=>{const n=D[u];return n?typeof n=="function"?n():Promise.resolve(n):new Promise((t,s)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(s.bind(null,new Error("Unknown variable dynamic import: "+u+(u.split("/").length!==p?". Note that variables only represent file names one level deep.":""))))})},Ee={class:"layout-sider-menu-title"},be={style:{"font-size":"2rem","writing-mode":"vertical-rl"}},Le=oe({__name:"App",setup(D){const u=se(),p=le(),n=pe(),t=m(!1),s=m(!1);z("loading",s);const d=m(!1),P=te([]),I=m([]);let h=[];const y=m(),j=ne(()=>{var e,o,a;return((e=g.value)==null?void 0:e.lang)===_.english?(o=y.value)==null?void 0:o.programDescEn:(a=y.value)==null?void 0:a.programDesc}),g=m(),O=m(),q=async e=>{await C(e)},C=async e=>{var o;g.value=(await we(Object.assign({"../../langs/cn.ts":()=>L(()=>import("./cn.js"),__vite__mapDeps([0,1])),"../../langs/en.ts":()=>L(()=>import("./en.js"),__vite__mapDeps([2,1]))}),`../../langs/${e}.ts`,4)).locale,O.value=e===_.english?(await L(()=>import("./ant-design-vue.js").then(a=>a.e),__vite__mapDeps([3,4,5]))).default:(await L(()=>import("./ant-design-vue.js").then(a=>a.z),__vite__mapDeps([3,4,5]))).default,ie.locale(e===_.english?"en":"zh-cn"),(o=I.value)==null||o.forEach(a=>{R(e,a)}),n.setLang(e.toString())};z("lang",{lang:g});const R=(e,o)=>{o.label=e===_.chinese?o.desc:o.descEn,o.children&&o.children.forEach(a=>{R(e,a)})},U=e=>{d.value=e,n.setMenuCollapsed(e)},F=e=>{P.value=[e.key],u.push({name:e.key.toString()});const o=h.find(a=>a.programNo===e.key);y.value=o},H=async()=>{const o=(await $.get("/api/adminUser/programs/www")).data;o.isSuccess?h=o.records:me(o.message)},N=e=>{const o=n.roles;return e==="index"||o&&(p.meta.authorize===!1||o.includes(e))?!0:(location.href="/",!1)},G=()=>{n.logout(),location.href="/"},J=async()=>{var a;if(!n.isLogged||(await n.refreshToken(),!N(((a=p.name)==null?void 0:a.toString())??"a")))return;await H(),y.value=h.find(r=>r.programNo===p.name);const e=h.sort((r,f)=>r.order-f.order).map(r=>{var f;return{key:r.programNo,label:((f=g.value)==null?void 0:f.lang)===_.english?r.programDescEn:r.programDesc,desc:r.programDesc,descEn:r.programDescEn,progId:r.programId,parentId:r.parentId}});let o=fe(e,"progId","parentId","children");o=o.children.filter(r=>r.children),I.value=o,P.value=[p.name],d.value=n.menuCollapsed,u.beforeEach(async(r,f,w)=>{var E;N(((E=r.name)==null?void 0:E.toString())??"a")&&w()}),t.value=!0};return ae(()=>{C(n.lang),console.log(J==null),t.value=!0,n.isLogged=!0}),(e,o)=>{const a=c("a-menu"),r=c("a-divider"),f=c("a-button"),w=c("a-select-option"),E=c("a-select"),Q=c("a-flex"),W=c("a-layout-sider"),X=c("router-view"),Y=c("a-layout-content"),A=c("a-spin"),K=c("a-layout"),Z=c("a-modal"),ee=c("a-config-provider");return ce(),re(ee,{locale:O.value},{default:i(()=>{var M;return[l(A,{spinning:!t.value},{default:i(()=>[l(K,{style:{"min-height":"100vh","background-color":"#fff"}},{default:i(()=>[S(l(W,{collapsed:d.value,collapsible:"",onCollapse:U},{default:i(()=>[S(k("div",Ee,[k("div",be,B(j.value),1)],512),[[T,d.value]]),S(k("div",null,[l(a,{theme:"dark",mode:"inline",onSelect:F,selectedKeys:P.value,items:I.value},null,8,["selectedKeys","items"]),l(r,{style:{"background-color":"#ffffff44"}}),l(Q,{justify:"space-around",align:"center"},{default:i(()=>[l(f,{onClick:G,ghost:"",size:"small"},{default:i(()=>{var V;return[x(B((V=g.value)==null?void 0:V.app.登出),1)]}),_:1}),l(E,{value:b(n).lang,onChange:q,size:"small",style:{width:"100px"}},{default:i(()=>[l(w,{value:b(_).english},{default:i(()=>[x("English")]),_:1},8,["value"]),l(w,{value:b(_).chinese},{default:i(()=>[x("中文")]),_:1},8,["value"])]),_:1},8,["value"])]),_:1})],512),[[T,!d.value]])]),_:1},8,["collapsed"]),[[T,!1]]),l(K,{style:{padding:"16px","background-color":"#fff",overflow:"auto"}},{default:i(()=>[l(A,{spinning:s.value},{default:i(()=>[l(Y,null,{default:i(()=>[l(X)]),_:1})]),_:1},8,["spinning"])]),_:1})]),_:1})]),_:1},8,["spinning"]),l(Z,{closable:!1,open:!b(n).isLogged,title:(M=g.value)==null?void 0:M.app.登录,footer:null},{default:i(()=>[l(_e)]),_:1},8,["open","title"])]}),_:1},8,["locale"])}}}),De=ge(Le,[["__scopeId","data-v-734285c6"]]),v=ue(De);v.use(ve);v.use(de);v.use(he);v.component("KaTable",ye);v.config.globalProperties.$axios=$;v.mount("#app");
