import{K as p}from"../ka-table.js";import{E as a}from"../util.js";import{v as m,s as f}from"../KaUpload.js";import{$ as c}from"../axiosExt.js";import{d as v,r as o,n as x,c as I,u as n,b,o as h}from"../vendor.js";import"../ant-design-vue.js";import"../Home.js";import"../pinia.js";import"../storage.js";import"../lang.js";import"../json-data.js";const B=v({__name:"ProgramManager",setup(g){const{lang:e}=b("lang"),r=o([{label:"-",value:0}]),s={programId:{title:"ID",dbInfo:{isPk:!0,dataType:"number"}},programNo:{title:"CODE"},programDesc:{title:e.value.admin.程序名称,listInfo:{index:1,width:"200px"},sortInfo:{index:null},editorInfo:{index:1,width:"300px",rules:[{required:!0,validator:i}]}},programDescEn:{title:e.value.admin.程序英文名,listInfo:{index:2},filterInfo:{isFilter:!1},editorInfo:{index:2,width:"300px"}},parentId:{title:e.value.admin.所属模组,dbInfo:{dataType:"number"},editorInfo:{index:3,componentType:"select",options:r.value,width:"300px",rules:[{required:!0,validator:i}]}},isGroup:{title:e.value.admin.是否模组,listInfo:{index:4,width:"100px",options:[{label:e.value.util.是,value:a.Y},{label:e.value.util.否,value:a.N}]},editorInfo:{index:4,componentType:"select",width:"100px",rules:[{required:!0,validator:i}]}},order:{title:e.value.admin.排序顺序,dbInfo:{dataType:"number"},listInfo:{index:5,width:"70px"},filterInfo:{isFilter:!1},editorInfo:{index:5,width:"100px",rules:[{required:!0,validator:i}]}},state:{title:e.value.util.状态,listInfo:{index:6,width:"80px",options:[{label:e.value.util.启用,value:a.Y},{label:e.value.util.停用,value:a.N}]},editorInfo:{index:6,componentType:"select",width:"100px",rules:[{required:!0,validator:i}]}},modifyAt:{title:e.value.util.修改时间,listInfo:{index:7},dbInfo:{dataType:"date"}},modifier:{userName:{title:e.value.util.修改人,listInfo:{width:"100px",index:8}}},parentProgram:{programDescEn:{title:e.value.admin.所属模组,listInfo:{index:3}}}},d=o(),u=async()=>{const t=(await c.get("/api/adminProgram/modules")).data;t.isSuccess?r.value.push(...t.records):f(t.message)};async function i(l,t){return m(e.value.validate,t)}return x(()=>{u()}),(l,t)=>(h(),I(n(p),{ref_key:"$table",ref:d,"table-title":n(e).admin.程序,size:"small",columns:s,toolbar:{hasRemove:!1,hasExport:!1},url:"/api/adminProgram/table","is-debug":!1},null,8,["table-title"]))}});export{B as default};
