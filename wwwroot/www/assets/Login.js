import{d as S,g as h,b as q,r as x,h as k,j as s,o as C,c as R,w as r,f as a,u as m,k as j,v as B,l as D,t as U}from"./vendor.js";import{u as V}from"./storage.js";import{v as F}from"./KaUpload.js";const z=S({__name:"Login",setup(I){const f=V(),v=h(),{lang:n}=q("lang"),p=x(""),t=k({userId:0,userName:"",password:"",state:""}),w=async c=>{try{await f.login(t.userName,t.password),v.go(0)}catch(e){p.value=e}},i=async(c,e)=>{var l;return F((l=n.value)==null?void 0:l.validate,e)};return(c,e)=>{const l=s("a-input"),u=s("a-form-item"),g=s("a-input-password"),b=s("a-alert"),y=s("a-button"),N=s("a-form");return C(),R(N,{model:t,"label-col":{span:4},"wrapper-col":{span:20},autocomplete:"off",onFinish:w},{default:r(()=>{var _,d;return[a(u,{label:(_=m(n))==null?void 0:_.app.账号,name:"userName",rules:[{required:!0,validator:i}]},{default:r(()=>[a(l,{value:t.userName,"onUpdate:value":e[0]||(e[0]=o=>t.userName=o)},null,8,["value"])]),_:1},8,["label","rules"]),a(u,{label:(d=m(n))==null?void 0:d.app.密码,name:"password",rules:[{required:!0,validator:i}]},{default:r(()=>[a(g,{value:t.password,"onUpdate:value":e[1]||(e[1]=o=>t.password=o)},null,8,["value"])]),_:1},8,["label","rules"]),j(a(u,{"wrapper-col":{offset:4,span:20}},{default:r(()=>[a(b,{message:p.value,type:"error"},null,8,["message"])]),_:1},512),[[B,p.value]]),a(u,{"wrapper-col":{offset:4,span:20}},{default:r(()=>[a(y,{type:"primary","html-type":"submit"},{default:r(()=>{var o;return[D(U((o=m(n))==null?void 0:o.app.登录),1)]}),_:1})]),_:1})]}),_:1},8,["model"])}}});export{z as _};
